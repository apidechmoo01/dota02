package edu.ycp.cs350.randart.gui;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;

import javax.swing.JPanel;

import edu.ycp.cs350.randart.ExprNode;

public class ArtPanel extends JPanel {
 private static final long serialVersionUID = 1L;
 private ExprNode[] rgbExpr;
 
 
 
 public ArtPanel(int width, int height) {
  rgbExpr = new ExprNode[3];
  
  setSize(new Dimension(width, height));
 }
 
 public void setRGBExpr(int rgb, ExprNode expr) {
  rgbExpr[rgb] = expr;
 }
 
 @Override
 public void paint(Graphics gr) {
  for (int j = 0; j < getHeight(); j++) {
   for (int i = 0; i < getWidth(); i++) {
    double x = ((((double) i) / getWidth()) * 2.0) - 1.0;
    double y = ((((double) j) / getHeight()) * 2.0) - 1.0;
    
    double r = rgbExpr[0].evaluateR(x, y);
    double g = rgbExpr[1].evaluateG(x, y);
    double b = rgbExpr[2].evaluateB(x, y);
    
    Color c = new Color(toColor(r), toColor(g),toColor(b));
    gr.setColor(c);
    gr.fillRect(i, j, 1, 1);
   }
  }
 }
 
 private static int toColor(double val) {
  val += 1.0;
  if (val < 0) {
   val *= -1;
  }
  val /= 2.0;
  int col = (int) (val * 255);
  if (col >= 255) {
   col = 255;
  }
  return col;
 }
}
